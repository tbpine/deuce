@model ViewModelMember
@using deuce.ext;
@using deuce;

@{
  Layout = "_LayoutMember";
}

@using System.Reflection;

<!-- Page content -->
<div class="col-lg-9">
  <h1 class="h2 pb-2 pb-lg-3">@Model.Tournament?.Label</h1>
  <div class="table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>

        @{

          //Show hide actions for this tournament
          //depending on it's state.
          string classStartVis = (Model.Tournament?.Status??TournamentStatus.New) == TournamentStatus.New
           && String.IsNullOrEmpty(Model.Error) ? "visible"  : "invisible";
          string classErrorVis = String.IsNullOrEmpty(Model.Error) ? "invisible"  : "visible";

          //Show hide scoring actions for this tournament
          //depending on it's state.
          string classScoringVis = (Model.Tournament?.Status??TournamentStatus.New) != TournamentStatus.New
           ? "visible"  : "invisible";


        }

        @Html.Raw(Model.HtmlTour)
        @Html.Raw(Model.HtmlTourDetail)

      </tbody>
    </table>

      <div class="alert alert-primary @classErrorVis mt-2" role="alert">@Model.Error</div>
      <a class="btn btn-primary @classStartVis mt-2" asp-controller="Tournament" asp-action="Start" asp-route-tournament="@Model.Tournament.Id">Start</a>
      <a class="btn btn-primary mt-2" asp-controller="Tournament" asp-action="Edit">Edit</a>
      <a class="btn btn-primary mt-2 @classScoringVis" asp-controller="Scoring" asp-action="Index" asp-route-tournament="@Model.Tournament.Id">Scores</a>

  </div>

</div>

<script>
  function submitWithAction(action) {
    //Set the hidden input 
    const eAction = document.getElementById("action");
    eAction.setAttribute("value", action);
    //Submit form
    document.getElementById("page_form").submit();


  }
</script>
