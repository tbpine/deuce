@model ViewModelMember

@{
    Layout = "_LayoutMember";
}

@using deuce
@using deuce.ext


<!-- Events go here-->
<div class="col-lg-9">
    <h1 class="h3 mb-0">Tournaments</h1>
    <p class="text-muted">Here you can find all the tournaments you created.</p>
    <table class="table">
        <thead>
            <th>Label</th>
            <th>Start</th>
            <th>Interval</th>
            <th>Type</th>
            <th></th>
            <th></th>
            <thead>
            <tbody>
                @foreach (Tournament iterTour in Model.Tournaments)
                {
                    
                    string intervalLabel = iterTour.Interval == 0 ? "" : Model.Intervals?.Find(e => e.Id == iterTour.Interval)?.Label ?? "";
                    string tourTypeLabel = Model.TournamentTypes?.Find(e => e.Id == iterTour.Type)?.Label ?? "";
                    //If the tournament start date is minimal, then set it to blank
                    string startDate = iterTour.Start == DateTime.MinValue ?"" : iterTour.Start.ToString("dd/MM/yyyy");

                    <tr>
                        <td><a class="hover-effect-underline fw-medium text-dark-emphasis text-decoration-none ms-2"
                                asp-controller="Tournament" asp-action="Summary"
                                asp-route-id="@iterTour.Id">@iterTour.Label</a></td>
                        <td>@startDate</td>
                        <td>@intervalLabel</td>
                        <td>@tourTypeLabel</td>
                        <td><a class="btn" asp-controller="TDetail" asp-action="Index"
                                asp-route-id="@iterTour.Id">Edit</a>
                        <td>
                            @if (iterTour.Status == TournamentStatus.Start)
                            {
                                <a class="btn" asp-controller="Tournament" asp-action="Scores"
                                    asp-route-id="@iterTour.Id">Scores</a>
                            }
                        </td>
                    </tr>
                }
            </tbody>

    </table>
</div>